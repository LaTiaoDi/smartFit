(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in"],{"661c":function(e,n,t){},"7fbb":function(e,n,t){"use strict";t.r(n);var o=t("abfd"),a=t("9240");for(var i in a)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("9bc2");var r=t("828b"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"630dd017",null,!1,o["a"],void 0);n["default"]=s.exports},9240:function(e,n,t){"use strict";t.r(n);var o=t("edd5"),a=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"9bc2":function(e,n,t){"use strict";var o=t("661c"),a=t.n(o);a.a},abfd:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}));var o={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"aff6"))},uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,"8e36"))}},a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.signInRes.days.length),o=e.__map(e.weekdays,(function(n,t){var o=e.__get_orig(n),a=e.signInRes.days.includes(n-1),i=e.signInRes.days.includes(n-1)||n>e.signInRes.n;return{$orig:o,g1:a,g2:i}}));e.$mp.data=Object.assign({},{$root:{g0:t,l0:o}})},i=[]},edd5:function(e,n,t){"use strict";(function(e,o){var a=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(t("7eb4")),r=a(t("ee10")),s=a(t("1d49")),u=e.database(),c=u.action("signIn").collection("opendb-sign-in"),d=(new Date((new Date).toLocaleDateString()).getTime(),{name:"uni-signIn",data:function(){return{total:0,scores:0,weekdays:[1,2,3,4,5,6,7],signInRes:{days:[],n:0}}},mounted:function(){},methods:{getSignedInInfo:function(){var e=arguments,n=this;return(0,r.default)(i.default.mark((function t(){var a,r,s;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"今日已签过",r=new Date((new Date).toLocaleDateString()).getTime(),t.next=4,c.where("'user_id' == $env.uid && 'date' == ".concat(r," && 'isDelete' == false")).get();case 4:return s=t.sent,s.result.data.length&&(n.signInRes=s.result,n.$refs.popup.open(),o.showToast({title:a,duration:3e3,icon:"none"})),t.abrupt("return",s.result.data);case 7:case"end":return t.stop()}}),t)})))()},showRewardedVideoAd:function(){var e=this;return(0,r.default)(i.default.mark((function n(){var t,a,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getSignedInInfo();case 2:if(t=n.sent,console.log(t),!t||0!=t.length){n.next=10;break}if(a=o.getStorageSync("userInfo"),u=a._id,console.log(u,o.getStorageSync("userInfo")),u){n.next=9;break}return n.abrupt("return",o.navigateTo({url:"/pages/ucenter/login-page/index/index"}));case 9:s.default.show({adpid:1733738477,adType:"RewardedVideo",urlCallback:{userId:u,extra:"uniSignIn"}},(function(n){if(n&&n.isEnded){console.log("onClose "+n.isEnded);var t=0;o.showLoading({mask:!0});var a=setInterval(function(){var s=(0,r.default)(i.default.mark((function r(s){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t++,i.next=3,e.getSignedInInfo("签到成功");case 3:n=i.sent,(t>2||n.length)&&(n.length||o.showToast({title:"签到失败！",icon:"error",duration:6e3}),clearInterval(a),o.hideLoading());case 5:case"end":return i.stop()}}),r)})));return function(e){return s.apply(this,arguments)}}(),2e3)}else console.log("onClose "+n.isEnded),o.showToast({title:"播放中途退出,签到失败！",icon:"error",duration:5e3})}),(function(e){console.log(e),o.showToast({title:e.errMsg,icon:"none"})}));case 10:case"end":return n.stop()}}),n)})))()},open:function(){var e=this;return(0,r.default)(i.default.mark((function n(){var t,a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o.showLoading({mask:!0}),n.prev=1,n.next=4,e.getSignedInInfo();case 4:if(t=n.sent,!t||0!=t.length){n.next=14;break}return n.next=8,c.add({});case 8:a=n.sent,console.log(a),o.hideLoading(),e.signInRes=a.result,e.$refs.popup.open(),7==e.signInRes.days.length?o.showToast({title:"你已完成7日连续签到，获得60积分！",icon:"none",duration:5e3}):o.showToast({title:"签到成功,获得10积分！",icon:"none",duration:5e3});case 14:n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](1),o.hideLoading(),console.error(n.t0);case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()},closeMe:function(e){this.$refs.popup.close()}}});n.default=d}).call(this,t("861b")["default"],t("df3c")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component',
    {
        'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("7fbb"))
        })
    },
    [['uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component']]
]);
